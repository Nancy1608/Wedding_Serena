<!DOCTYPE html>
<html lang="en"><head>
  
  <meta charset="UTF-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wedding Guest List</title>

  
  
  <style>
body { font-family: Arial, sans-serif; background: #fff; margin: 0; padding: 0; }
.container { padding: 10px; max-width: 1000px; margin: auto; }
.filters-row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; margin-bottom: 8px; }
button { padding: 8px 12px; border: none; cursor: pointer; border-radius: 4px; }
.arrived-btn { background: #4CAF50; color: white; }
.pending-btn { background: #DAA520; color: black; } /* gold color */
.clear-btn { background: red; color: white; border-radius: 50%; padding: 0 6px; cursor: pointer; font-weight: bold; }
table { border-collapse: collapse; width: 100%; }
th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
th { background-color: #f2f2f2; }
.card { border: 1px solid #ddd; border-radius: 8px; padding: 10px; margin-bottom: 10px; }
@media (max-width: 768px) {
table { display: none; }
.card { display: block; }
.filters-row { flex-direction: row; }
}
@media (min-width: 769px) {
.card { display: none; }
}
  </style>
</head><body>
<div class="container">
<!-- First row: filter buttons + total pax -->
<div class="filters-row"> <button onclick="filterGuests('all')">All</button>
<button onclick="filterGuests('arrived')">Arrived</button> <button onclick="filterGuests('pending')">Pending</button>

</div>
<!-- Second row: search + clear + revert -->
<div class="filters-row"> <input id="search" placeholder="Search by guest or table..." oninput="searchGuests()" type="text"> <span class="clear-btn" onclick="clearSearch()">×</span>
<button onclick="revertAll()">Revert All</button>
</div>
<table id="guestTable">
  <thead>
  <tr>
    <th>Table No</th>
    <th>Guest Name</th>
    <th>Pax</th>
    <th>Status</th>
  </tr>
  </thead>
  <tbody>
  </tbody>
</table>

</div>

<script>
let guests = [
    {table:20, pax:4, name:"Boon's Friends"},
    {table:20, pax:6, name:"Serena's Friends"},
    {table:14, pax:2, name:"Ming Ming & Spouse"},
    {table:14, pax:2, name:"Lee Kah Yee & Spouse"},
    {table:14, pax:1, name:"Ming Ming’s Aunty"},
    {table:14, pax:1, name:"Mrs Lim Tua Lek"},
    {table:14, pax:3, name:"Nicole Yap & Family"},
    {table:8, pax:2, name:"Mr & Mrs Soon Chin Hoon"},
    {table:8, pax:2, name:"Ong Ting Ting & Spouse"},
    {table:8, pax:2, name:"Mr & Mrs Jesse Jee"},
    {table:8, pax:2, name:"Mr & Mrs Lee Peng Koon"},
    {table:8, pax:2, name:"Mr & Mrs Loh Hoi Yew"},
    {table:2, pax:2, name:"Kian Mun & Daughter"},
    {table:2, pax:1, name:"Amy"},
    {table:2, pax:3, name:"Benny & Family"},
    {table:2, pax:4, name:"Victor & Family"},
    {table:21, pax:1, name:"Gurdeu"},
    {table:21, pax:4, name:"Jasvin, Annish & Family"},
    {table:21, pax:3, name:"Sukhvinder & Family"},
    {table:21, pax:2, name:"Dato’ & Datin Jesbil"},
    {table:15, pax:2, name:"Mr & Mrs Chan (Joo Heong)"},
    {table:15, pax:1, name:"Ricky Chan"},
    {table:15, pax:2, name:"Liew Li Fong & Spouse"},
    {table:15, pax:2, name:"Tan Ai Tiang & Spouse"},
    {table:15, pax:1, name:"Kevin Lau"},
    {table:15, pax:2, name:"Mr & Mrs Wong Yok Heng"},
    {table:9, pax:10, name:"Seah Kiat Seng & Family"},
    {table:3, pax:3, name:"Lay Weng & Family"},
    {table:3, pax:6, name:"Carmen & Family"},
    {table:3, pax:1, name:"Nancy"},
    {table:22, pax:2, name:"Mr & Mrs Loh Weng Cheong"},
    {table:22, pax:2, name:"Mr & Mrs Goh Keat Hoe"},
    {table:22, pax:2, name:"Mr & Mrs Eric Woh Pei Su"},
    {table:22, pax:2, name:"Mr & Mrs Francis Wong"},
    {table:22, pax:1, name:"Lim Hong Guan"},
    {table:22, pax:1, name:"Ang Sing Hai"},
    {table:16, pax:2, name:"Mr & Mrs Sunny Phang"},
    {table:16, pax:1, name:"Ms Eng Hui Mun"},
    {table:16, pax:1, name:"Ms Tan Yoke Lan"},
    {table:16, pax:2, name:"Mr & Mrs Ng Kim Siah"},
    {table:16, pax:2, name:"Mr & Mrs Yap Meow Sing"},
    {table:16, pax:2, name:"Mr & Mrs Lim Tow Poe"},
    {table:10, pax:1, name:"Ms Soo Kah Huey"},
    {table:10, pax:2, name:"Dato’ & Datin Soo Kah Eng"},
    {table:10, pax:2, name:"Dato’ & Datin Lew Wai Koung"},
    {table:10, pax:1, name:"Datin Toh Bee Huan"},
    {table:10, pax:2, name:"Mr & Mrs Soo Hock Chuan"},
    {table:10, pax:1, name:"Mdm Lau Yoke Eng"},
    {table:10, pax:1, name:"Mdm Isabelle Fam"},
    {table:4, pax:4, name:"Shirley & Family"},
    {table:4, pax:1, name:"Annie"},
    {table:4, pax:1, name:"Ruby"},
    {table:4, pax:2, name:"Amy Tiew & Ah Ngoh"},
    {table:4, pax:2, name:"Mr & Mrs Sunny Tiew"}
];
// optional: sort by table number (ascending) then name
guests.sort((a,b) => (a[0]-b[0]) || a[2].localeCompare(b[2]));

let statusMap = JSON.parse(localStorage.getItem('guestStatus')) || {};
let currentFilter = 'all';

function saveStatus() {
    localStorage.setItem('guestStatus', JSON.stringify(statusMap));
}

function updateDisplay() {
    const tbody = document.querySelector('#guestTable tbody');
    const cardsContainer = document.getElementById('guestCards');
    tbody.innerHTML = '';
    cardsContainer.innerHTML = '';
    const searchTerm = document.getElementById('search').value.toLowerCase();

    const filtered = guests.filter(g => {
        const name = g[2];
        const status = statusMap[name] || 'pending';
        const matchesSearch = !searchTerm ||
            name.toLowerCase().includes(searchTerm) ||
            String(g[0]).includes(searchTerm); // search by table number
        const matchesFilter = (currentFilter === 'all') || (currentFilter === status);
        return matchesSearch && matchesFilter;
    });

    // Sum pax correctly from filtered rows
    const totalPax = filtered.reduce((sum, g) => sum + Number(g[1]), 0);
    document.getElementById('totalPax').innerText = 'Total Pax: ' + totalPax;

    // render rows/cards
    filtered.forEach(g => {
        const [tableNo, pax, name] = g;
        const status = statusMap[name] || 'pending';
        const btnClass = (status === 'arrived') ? 'arrived-btn' : 'pending-btn';
        const btnLabel = (status === 'arrived') ? 'Arrived' : 'Pending';

        // Desktop table
        tbody.innerHTML += `<tr>
            <td>${tableNo}</td>
            <td>${name}</td>
            <td>${pax}</td>
            <td><button class="${btnClass}" onclick="toggleStatus('${name.replace(/'/g, "\'")}')">${btnLabel}</button></td>
        </tr>`;

        // Mobile card
        cardsContainer.innerHTML += `<div class="card">
            <strong>Table:</strong> ${tableNo}<br>
            <strong>Name:</strong> ${name} (Pax: ${pax})<br>
            <button class="${btnClass}" onclick="toggleStatus('${name.replace(/'/g, "\'")}')">${btnLabel}</button>
        </div>`;
    });
}

function filterGuests(f) {
    currentFilter = f;
    updateDisplay();
}

function toggleStatus(name) {
    statusMap[name] = (statusMap[name] === 'arrived') ? 'pending' : 'arrived';
    saveStatus();
    updateDisplay();
}

function revertAll() {
    statusMap = {};
    saveStatus();
    updateDisplay();
}

function searchGuests() {
    updateDisplay();
}

function clearSearch() {
    document.getElementById('search').value = '';
    updateDisplay();
}

// initial render
updateDisplay();
</script>
</body></html>